(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{203:function(t,e,n){var content=n(211);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(49).default)("3b0b4880",content,!0,{sourceMap:!1})},204:function(t,e,n){var content=n(213);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(49).default)("0c509ce9",content,!0,{sourceMap:!1})},210:function(t,e,n){"use strict";var r=n(203);n.n(r).a},211:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,".create-budget__modal[data-v-195c80a2]{display:-webkit-box;display:flex;width:100%;height:100%;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;position:fixed;top:0;left:0;background:hsla(0,0%,87.8%,.7);z-index:2}.create-budget__form[data-v-195c80a2]{width:290px;max-height:95%;padding:15px;position:absolute;top:45%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:3;background:#fff;border:1px solid #e0e0e0;box-shadow:0 2px 8px rgba(0,0,0,.15);border-radius:2px;overflow:auto}.create-budget__title[data-v-195c80a2]{margin:0 0 10px}.create-budget__label[data-v-195c80a2]{font-size:.75em;color:#9e9e9e}.create-budget__input[data-v-195c80a2]{display:block;width:100%;height:28px;padding:5px;box-sizing:border-box;border:1px solid #e0e0e0;border-radius:2px;margin-bottom:10px}.create-budget__input_container[data-v-195c80a2]{display:-webkit-box;display:flex;height:28px;padding:0;overflow:hidden}.create-budget__input_container .create-budget__input[data-v-195c80a2]{height:26px;border:none;border-radius:0;margin-bottom:0;background-color:transparent}.create-budget__input_container .create-budget__input_currency[data-v-195c80a2]{-webkit-box-flex:0;flex:0 0 60px}.buttons-container[data-v-195c80a2]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;margin-top:15px}.button[data-v-195c80a2]{height:28px;background:#fff;border:1px solid #e0e0e0;box-sizing:border-box;border-radius:2px}.button[data-v-195c80a2]:hover:not([disabled]){background:#e0e0e0;color:#fff}",""])},212:function(t,e,n){"use strict";var r=n(204);n.n(r).a},213:function(t,e,n){(t.exports=n(48)(!1)).push([t.i,"body[data-v-e0152c1a]{margin:0;font-family:Arial;background-color:#fafafa}body[data-v-e0152c1a],ul[data-v-e0152c1a]{padding:0}ul[data-v-e0152c1a]{list-style:none}.warning[data-v-e0152c1a]{color:#721c24;background-color:#f8d7da;position:relative;padding:.75rem 1.25rem;margin-top:1rem;border:1px solid #f5c6cb;border-radius:2px}.details__container[data-v-e0152c1a]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;padding:0 15px}.details__card[data-v-e0152c1a]{width:35%;min-width:290px;margin-top:15px;padding:15px 20px;background:#fff;border:1px solid #e0e0e0;box-shadow:0 2px 2px rgba(0,0,0,.15);border-radius:2px;box-sizing:border-box}.details__name[data-v-e0152c1a]{font-size:1.5em;margin-bottom:15px}.details__text[data-v-e0152c1a]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:5px;overflow:hidden}.details__label[data-v-e0152c1a]{font-size:.75em;color:#9e9e9e}.details__label_icon[data-v-e0152c1a]{font-size:25px}.details__list[data-v-e0152c1a]{width:35%;min-width:290px;margin-top:15px}.details__list .details__card[data-v-e0152c1a]{width:100%;margin-top:0}.details__add[data-v-e0152c1a]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;cursor:pointer;margin-bottom:10px;-webkit-transition:box-shadow .3s;transition:box-shadow .3s}.details__add[data-v-e0152c1a]:hover{box-shadow:0 2px 4px rgba(0,0,0,.15)}.details__transaction[data-v-e0152c1a]{-webkit-box-pack:justify;justify-content:space-between;position:relative;min-width:290px;margin-top:-1px;padding:15px 20px;background:#fff;border:1px solid #e0e0e0;border-radius:2px}.details__row[data-v-e0152c1a],.details__transaction[data-v-e0152c1a]{display:-webkit-box;display:flex;box-sizing:border-box}.details__row[data-v-e0152c1a]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:33%;overflow:hidden}.details__row[data-v-e0152c1a]:last-of-type{padding-right:45px}.details__remove[data-v-e0152c1a]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;position:absolute;width:30px;height:30px;top:15px;right:15px;border-radius:50%;border:1px solid #e0e0e0;background-color:#fff;cursor:pointer;z-index:1}.details__remove[data-v-e0152c1a]:hover{opacity:.7}.details__remove svg[data-v-e0152c1a]{fill:#ff5252}.details__close[data-v-e0152c1a]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:40px;height:40px;position:absolute;top:15px;right:15px;cursor:pointer;border:1px solid #e0e0e0;border-radius:50%}",""])},215:function(t,e,n){"use strict";n.r(e);var r=n(214),o=(n(34),n(5)),c=n(209),d=n(177),l={data:function(){return{currencies:["USD","EUR","GBP","RUB"],target:"",amount:null,currency:["USD","EUR","GBP","RUB"].length?"USD":""}},methods:{closeModal:function(){this.$emit("close")},addTransaction:function(){this.$v.$invalid||this.$emit("create",{target:this.target,amount:this.amount,currency:this.currency})}},validations:{target:{required:d.required},amount:{required:d.required},currency:{required:d.required}}},_=(n(210),n(19)),v={components:{AddTransaction:Object(_.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("form",{staticClass:"create-budget__form"},[n("h3",{staticClass:"create-budget__title"},[t._v("Add Transaction")]),t._v(" "),n("label",{staticClass:"create-budget__label",attrs:{for:"target"}},[t._v("Enter Target")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.target,expression:"target",modifiers:{trim:!0}}],staticClass:"create-budget__input",attrs:{id:"target",type:"text"},domProps:{value:t.target},on:{blur:[function(e){return t.$v.target.$touch()},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.target=e.target.value.trim())}}}),t._v(" "),n("label",{staticClass:"create-budget__label",attrs:{for:"amount"}},[t._v("Enter Amount")]),t._v(" "),n("span",{staticClass:"create-budget__input create-budget__input_container"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.amount,expression:"amount",modifiers:{trim:!0}}],staticClass:"create-budget__input",attrs:{type:"number",id:"amount"},domProps:{value:t.amount},on:{blur:[function(e){return t.$v.amount.$touch()},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.amount=e.target.value.trim())}}}),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.currency,expression:"currency",modifiers:{trim:!0}}],staticClass:"create-budget__input create-budget__input_currency",on:{blur:function(e){return t.$v.currency.$touch()},change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.currency=e.target.multiple?n:n[0]}}},t._l(t.currencies,function(e,r){return n("option",{key:r},[t._v(t._s(e))])}),0)]),t._v(" "),n("span",{staticClass:"buttons-container"},[n("input",{staticClass:"button",attrs:{type:"button",value:"Cancel"},on:{click:function(e){return t.closeModal()}}}),t._v(" "),n("input",{staticClass:"button",attrs:{disabled:t.$v.$invalid,type:"button",value:"Add Transaction"},on:{click:function(e){return t.addTransaction()}}})])]),t._v(" "),n("div",{staticClass:"create-budget__modal"})])},[],!1,null,"195c80a2",null).exports},middleware:["budget"],computed:{selectedBudget:function(){var t,e=+this.$route.params.id;return this.$store.getters["budget/budgets"].some(function(n){n.id===e&&(t=n)}),t}},mounted:function(){var t=this;this.intervalFunction=setInterval(function(){return t.transactionProcessing()},3e4)},destroyed:function(){clearInterval(this.intervalFunction)},data:function(){return{modalFormOpen:!1,intervalFunction:function(){}}},methods:{openModal:function(){this.modalFormOpen=!0},closeModal:function(){this.modalFormOpen=!1},addTransaction:function(t){var e=+this.$route.params.id;this.$store.commit("budget/addTransaction",{id:e,transaction:t}),this.$store.dispatch("budget/saveBudgets"),this.transactionProcessing(),this.closeModal()},removeTransaction:function(t){var e=+this.$route.params.id;this.$store.commit("budget/removeTransaction",{id:e,index:t}),this.$store.dispatch("budget/saveBudgets"),this.transactionProcessing()},transactionProcessing:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n,r,o,c,d=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.selectedBudget.transactions,n=this.selectedBudget.currency,r=[],t.next=5,this.$store.dispatch("exchange/fetchExchangeData",n);case 5:o=this.$store.getters["exchange/data"],e.forEach(function(t){var e=t.currency,n=d.conversion(t.amount,o.rates[e]);r.push(n)}),c=this.transactionCounting(this.selectedBudget.limit,r),this.$store.commit("budget/updateBudgets",{data:c,id:+this.$route.params.id}),this.$store.dispatch("budget/saveBudgets");case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),conversion:function(t,e){var n=new c.Decimal(t),r=new c.Decimal(e);return+n.dividedBy(r)},transactionCounting:function(t,e){var n={remaining:t,average:0,maximum:0,minimum:0};if(e.length){var o=new c.Decimal(n.remaining);n.minimum=+c.Decimal.min.apply(c.Decimal,Object(r.a)(e)).toFixed(2),n.maximum=+c.Decimal.max.apply(c.Decimal,Object(r.a)(e)).toFixed(2);var d=new c.Decimal(0);e.forEach(function(t){d=d.plus(t)}),n.remaining=+o.minus(d).toFixed(2),n.average=+d.dividedBy(e.length).toFixed(2)}return n}}},m=(n(212),Object(_.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"details__container"},[n("nuxt-link",{staticClass:"details__close",attrs:{to:"/budgets"}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"}},[n("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}),n("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])]),t._v(" "),t.selectedBudget.remaining<0?n("div",{staticClass:"warning"},[t._v("Limit exceeded on "+t._s(-t.selectedBudget.remaining)+" "+t._s(t.selectedBudget.currency))]):t._e(),t._v(" "),n("div",{staticClass:"details__card"},[n("div",{staticClass:"details__name"},[t._v("\n        "+t._s(t.selectedBudget.name)+"\n      ")]),t._v(" "),n("div",{staticClass:"details__text"},[n("span",{staticClass:"details__label"},[t._v("Limit:")]),t._v(" "),n("span",[t._v(t._s(t.selectedBudget.limit)+" "+t._s(t.selectedBudget.currency))])]),t._v(" "),n("div",{staticClass:"details__text"},[n("span",{staticClass:"details__label"},[t._v("Remaining budget:")]),t._v(" "),n("span",[t._v(t._s(t.selectedBudget.remaining)+" "+t._s(t.selectedBudget.currency))])]),t._v(" "),n("div",{staticClass:"details__text"},[n("span",{staticClass:"details__label"},[t._v("Average transaction amount:")]),t._v(" "),n("span",[t._v(t._s(t.selectedBudget.averageAmount)+" "+t._s(t.selectedBudget.currency))])]),t._v(" "),n("div",{staticClass:"details__text"},[n("span",{staticClass:"details__label"},[t._v("Maximum transaction amount:")]),t._v(" "),n("span",[t._v(t._s(t.selectedBudget.maximumAmount)+" "+t._s(t.selectedBudget.currency))])]),t._v(" "),n("div",{staticClass:"details__text"},[n("span",{staticClass:"details__label"},[t._v("Minimum transaction amount:")]),t._v(" "),n("span",[t._v(t._s(t.selectedBudget.minimumAmount)+" "+t._s(t.selectedBudget.currency))])])]),t._v(" "),n("ul",{staticClass:"details__list"},[t.selectedBudget.remaining>0?n("li",{staticClass:"details__add details__transaction",on:{click:function(e){return t.openModal()}}},[n("span",{staticClass:"details__label details__label_icon"},[t._v("+")]),t._v(" "),n("span",{staticClass:"details__label"},[t._v("Add transaction")])]):t._e(),t._v(" "),t._l(t.selectedBudget?t.selectedBudget.transactions:[],function(e,r){return n("li",{key:r,staticClass:"details__transaction"},[n("span",{staticClass:"details__row"},[n("span",{staticClass:"details__label"},[t._v("Target: ")]),t._v(" "),n("span",[t._v(t._s(e.target))])]),t._v(" "),n("span",{staticClass:"details__row"},[n("span",{staticClass:"details__label"},[t._v("Amount: ")]),t._v(" "),n("span",[t._v(t._s(e.amount))])]),t._v(" "),n("span",{staticClass:"details__row"},[n("span",{staticClass:"details__label"},[t._v("Currency: ")]),t._v(" "),n("span",[t._v(t._s(e.currency))])]),t._v(" "),n("a",{staticClass:"details__remove",on:{click:function(e){return t.removeTransaction(r)}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"}},[n("path",{attrs:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}),n("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])])])})],2),t._v(" "),t.modalFormOpen?n("add-transaction",{on:{close:t.closeModal,create:function(e){return t.addTransaction(e)}}}):t._e()],1)])},[],!1,null,"e0152c1a",null));e.default=m.exports}}]);